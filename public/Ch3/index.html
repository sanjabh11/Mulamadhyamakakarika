<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nagarjuna's Examination of the Senses & Quantum Physics</title>
    <link rel="stylesheet" href="styles.css">
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/",
            "gsap": "https://cdn.jsdelivr.net/npm/gsap@3.12.2/index.js"
        }
    }
    </script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1>Chapter 3: Examination of the Senses</h1>
            <p>Explore the parallels between Madhyamaka Buddhist philosophy and quantum mechanics</p>
            <nav>
                <ul>
                    <li><a href="../">Home</a></li>
                    <li><a href="../Ch1/index.html">Chapter 1</a></li>
                    <li><a href="../Ch2/index.html">Chapter 2</a></li>
                    <li><a href="../Ch3/index.html" class="active">Chapter 3</a></li>
                </ul>
            </nav>
        </header>
        
        <div class="main-content">
            <div class="chapter-index">
                <h2>Chapter 3</h2>
                <div class="verse-list">
                    <div class="verse-item" data-verse="1">
                        <span>Verse 3.1</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="2">
                        <span>Verse 3.2</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="3">
                        <span>Verse 3.3</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="4">
                        <span>Verse 3.4</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="5">
                        <span>Verse 3.5</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="6">
                        <span>Verse 3.6</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="7">
                        <span>Verse 3.7</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="8">
                        <span>Verse 3.8</span>
                        <span class="status available">Available</span>
                    </div>
                    <div class="verse-item" data-verse="9">
                        <span>Verse 3.9</span>
                        <span class="status available">Available</span>
                    </div>
                </div>
            </div>

            <div class="visualization-container">
                <div id="animation-container"></div>
                <div id="loading-overlay" class="visible">Loading animations...</div>
                <div class="controls">
                    <div class="control-panel">
                        <div class="verse-selector">
                            <label for="verse-select">Select Verse:</label>
                            <select id="verse-select"></select>
                        </div>
                        <div class="animation-controls">
                            <button id="trigger-btn">Measure</button>
                            <button id="reset-btn">Reset</button>
                            <button id="pause-btn">Pause</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="info-panel">
                <div class="verse-text">
                    <h3>Verse <span id="verse-number">3.1</span></h3>
                    <div id="verse-content-container">
                      <p id="verse-content">
                        Without the seen, there is no seeing,<br>
                        Without seeing, the seen does not exist.<br>
                        Therefore both the seen and seeing<br>
                        Are by nature empty of inherent existence.
                      </p>
                    </div>
                </div>
                
                <div class="analysis">
                    <div class="madhyamaka">
                        <h4>Madhyamaka Concept</h4>
                        <p id="madhyamaka-concept">Emptiness of sense faculties and their objects; mutual dependence between perceiver and perceived.</p>
                    </div>
                    
                    <div class="quantum">
                        <h4>Quantum Physics Parallel</h4>
                        <p id="quantum-parallel">Observer effect and measurement problem in quantum mechanics.</p>
                    </div>
                    
                    <div class="explanation">
                        <h4>Analysis</h4>
                        <p id="analysis-text">Both traditions challenge the independence of observer and observed. In quantum mechanics, the act of measurement affects what is measured, just as in Madhyamaka, the seer and seen are mutually dependent and empty of inherent existence.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Exploring the intersection of ancient Eastern philosophy and modern quantum physics</p>
            <p>&copy; 2023 MMK Project. All rights reserved.</p>
        </footer>
    </div>
    
    <script type="module" src="config.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module">
        // Add click handlers for verse items
        document.addEventListener('DOMContentLoaded', function() {
            // Set up verse item click handlers
            const verseItems = document.querySelectorAll('.verse-item');
            verseItems.forEach(item => {
                item.addEventListener('click', function() {
                    const verseId = parseInt(this.getAttribute('data-verse'));
                    // Get the app instance
                    if (window.quantumApp) {
                        window.quantumApp.loadVerse(verseId);
                        // Update URL hash without causing page refresh
                        window.history.pushState(null, null, `#verse-${verseId}`);
                    }
                });
            });

            // Check for hash in URL to load specific verse
            if (window.location.hash) {
                const hash = window.location.hash.substring(1); // Remove the '#' symbol
                const match = hash.match(/verse-(\d+)/);
                if (match && match[1]) {
                    const verseId = parseInt(match[1]);
                    // Wait a bit for the app to initialize
                    setTimeout(() => {
                        if (window.quantumApp) {
                            window.quantumApp.loadVerse(verseId);
                        }
                    }, 300);
                }
            }
        });
    </script>
</body>
</html>